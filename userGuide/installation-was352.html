<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/xdoc/userGuide/installation-was352.xml at 2022-11-14

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Struts 1 &#x2013; The Struts Framework Project - Installation - WebSphere
            3.5.2</title>
    <link rel="stylesheet" href="../css/maven-base.css" />
    <link rel="stylesheet" href="../css/maven-theme.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
  </head>
  <body class="composite">
    <div id="banner">
<a href="https://www.apache.org/" id="bannerLeft"><img src="../images/asf-logo.png"  alt="Apache Software Foundation"/></a><a href="https://struts.apache.org/index.html" id="bannerRight"><img src="../images/struts.png"  alt="Apache Struts"/></a>      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2022-11-14</span>
           | <span id="projectVersion">Version: 1.4.4</span>
      </div>
      <div class="xright"><a href="https://www.apache.org/" class="externalLink" title="Apache">Apache</a> |
<a href="https://struts.apache.org/index.html" class="externalLink" title="Struts">Struts</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Struts 1</h5>
    <ul>
     <li class="none"><a href="../index.html" title="Welcome">Welcome</a></li>
     <li class="none"><a href="../learning.html" title="Learning">Learning</a></li>
     <li class="none"><a href="../roadmap.html" title="Roadmap">Roadmap</a></li>
     <li class="none"><a href="https://github.com/weblegacy/struts1/releases" class="externalLink" title="Releases">Releases</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks!">Thanks!</a></li>
     <li class="none"><a href="https://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">Sponsorship</a></li>
    </ul>
       <h5>Documentation</h5>
    <ul>
     <li class="none"><a href="../userGuide/index.html" title="User Guide">User Guide</a></li>
     <li class="none"><a href="../faqs/index.html" title="FAQs and HOWTOs">FAQs and HOWTOs</a></li>
     <li class="none"><a href="../userGuide/release-notes.html" title="Release Notes">Release Notes</a></li>
     <li class="none"><a href="../apidocs/index.html" title="Javadoc">Javadoc</a></li>
     <li class="none"><a href="../dtddoc/index.html" title="DTDDoc">DTDDoc</a></li>
    </ul>
       <h5>Support</h5>
    <ul>
     <li class="none"><a href="https://struts.apache.org/mail.html" class="externalLink" title="User Mailing List">User Mailing List</a></li>
     <li class="none"><a href="https://issues.apache.org/jira/browse/WW" class="externalLink" title="Issue Tracker (JIRA)">Issue Tracker (JIRA)</a></li>
     <li class="none"><a href="https://cwiki.apache.org/confluence/display/WW/Home" class="externalLink" title="Wiki Pages">Wiki Pages</a></li>
    </ul>
       <h5>Components</h5>
    <ul>
     <li class="none"><a href="../struts-apps/index.html" title="Struts Apps">Struts Apps</a></li>
     <li class="none"><a href="../struts-core/index.html" title="Struts Core">Struts Core</a></li>
     <li class="none"><a href="../struts-el/index.html" title="Struts EL">Struts EL</a></li>
     <li class="none"><a href="../struts-extras/index.html" title="Struts Extras">Struts Extras</a></li>
     <li class="none"><a href="../struts-faces/index.html" title="Struts Faces">Struts Faces</a></li>
     <li class="none"><a href="../struts-scripting/index.html" title="Struts Scripting">Struts Scripting</a></li>
     <li class="none"><a href="../struts-taglib/index.html" title="Struts Taglib">Struts Taglib</a></li>
     <li class="none"><a href="../struts-tiles/index.html" title="Struts Tiles">Struts Tiles</a></li>
     <li class="none"><a href="../struts-tiles2/index.html" title="Struts Tiles2">Struts Tiles2</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="../project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">


    
        <a name="installation"></a><section id="installation">
<h2><a name="a6.2_Installation"></a>6.2 Installation</h2>
            <a name="Containers"></a><section id="Containers">
<h3><a name="Installing_Struts_with_your_servlet_container"></a>Installing Struts with your servlet container</h3>

                <section id="was352">
<h4 id="was352">WebSphere Application Server 3.5 FixPack
                    2</h4>

                
<ul>
                    
<li>In the steps below,
                        <code>$WAS_HOME</code>
                        refers to the directory in which you
                        have installed WebSphere Application Server, and
                        <code>$STRUTS_HOME</code>
                        is the
                        directory in which you unpacked the Struts binary
                        distribution.
                    </li>

                    
<li>WebSphere before 3.5.2 did not support JSP 1.1 and
                        Servlet 2.2, which
                        made it difficult to get Struts functioning without
                        massive code changes.
                        Please upgrade to 3.5.2 (3.5 with FixPack 2) before
                        attempting to use
                        Struts. See
                        <a class="externalLink" href="http://www.ibm.com/software/webservers/appserv/efix.html">
                            http://www.ibm.com/software/webservers/appserv/efix.html</a>
                        for download and install instructions on FixPack 2 for
                        WebSphere 3.5
                    </li>

                    
<li>Warning: Struts will not work with WebSphere 3.5.2 out
                        of the box. Fixes
                        expected to be in WebSphere 3.5.3 (not released at
                        time of writing) should
                        correct this. However, you can successfully get
                        WebSphere 3.5.2 working
                        with Struts.</li>

                    
<li>Make sure the WebSphere Application Server is started.
                        Under Windows
                        NT/2000, it's the &quot;IBM WS AdminServer&quot; service.</li>

                    
<li>Start the WebSphere Administrative Console.</li>

                    
<li>Once it's started, select &quot;Convert a War File&quot; from
                        the tasks toolbar
                        option, or from the Console-&gt;Tasks menu. This will
                        cause a &quot;Convert War
                        File&quot; Wizard dialog to appear.</li>

                    
<li>Select a Servlet Engine to host the web application
                        that will result
                        from converting the War file, e.g. &quot;Default Servlet
                        Engine&quot;, by expanding
                        the tree control under Nodes. Press the Next
                        button.</li>

                    
<li>Select a Virtual Host to associate the resulting web
                        application with,
                        e.g. &quot;default host&quot;. Press the Next button.</li>

                    
<li>Press the Browse button and choose the
                        <code>$STRUTS_HOME/webapps/struts-example.war</code>
                        . Press the Next button
                    </li>

                    
<li>Select a destination directory for the resulting web
                        application, e.g.
                        <code>$WAS_HOME/hosts/default_host</code>
                        . Press the Next button
                    </li>

                    
<li>Enter a &quot;Web Application Web Path&quot;, e.g.
                        struts-example, and a &quot;Web
                        Application Name&quot;, e.g. struts-example. Press the
                        Finish button.</li>

                    
<li>You should, after a lengthy pause, get a message box
                        with the text
                        Command &quot;convert war file&quot; completed successfully.
                        Press Ok.</li>

                    
<li>You now need to add jaxp.jar and a jaxp compatible
                        parser, e.g.
                        parser.jar from JAXP 1.0.1 to the struts-example web
                        application's
                        servlets directory, e.g.
                        <code>
                            $WAS_HOME/AppServer/hosts/default_host/struts-example/servlets</code>
                    </li>

                    
<li>At this point, if WAS 3.5.2 correctly implemented
                        Servlet 2.2, all
                        would be fine. However, WAS 3.5.2 returns null for
                        calls to
                        <code>ServletContext.getResource(String)</code>
                        or
                        <code>
                            ServletContext.getResourceAsStream(String)</code>
                        . This manifests itself as an
                        exception in the application server stdout log, e.g.
                        <code>default_server_stdout.log.</code>
                    </li>

                    
<li>Warning: Don't be fooled by the fact that the web
                        application starts
                        successfully from the Admin Console. It actually
                        doesn't. The Admin
                        Console is lying. If you try to access the webapp
                        e.g.
                        <code>http://localhost/struts-example/</code>
                        it will fail.
                    </li>

                    
<li>At this point, you need to patch the Struts source.
                        There are three
                        places
                        <code>getResourceAsStream</code>
                        is called:
                    </li>
                </ul>
                
<div>
<pre>
                    ResourceTag.doStartTag()
                    ActionServlet.initMapping()
                    PropertyMessageResources.loadLocale(String)
                </pre></div>
                
<p>of these,
                    <code>ActionServlet</code>
                    is the most important.
                </p>

                
<ul>
                    
<li>Change the source from</li>
                </ul>
                
<div>
<pre>
                    // Acquire an input stream to our configuration resource
                    InputStream input =
                    getServletContext().getResourceAsStream(config);
                </pre></div>
                
<p>to</p>
                
<div>
<pre>
                    // Acquire an input stream to our configuration resource
                    InputStream input = new
                    java.io.FileInputStream(getServletContext().getRealPath(config));
                </pre></div>
                
<ul>
                    
<li>Make similar changes to the other classes if
                        necessary.</li>

                    
<li>Recompile ActionServlet and copy the
                        <code>.class</code>
                        file to
                        <br />

                        <code>
                            $WAS_HOME/AppServer/hosts/default_host/struts-example/servlets/
                            <br />
                            org/apache/struts/action/ActionServlet.class
                        </code>
                    </li>

                    
<li>Another bug with WAS 3.5.2's classloaders is that
                        Class.getResource()
                        wont load a resource from a jar, so you must copy
                        <br />
                        <code>$STRUTS_HOME/lib/struts-config_1_0.dtd</code>
                        <br />
                        to
                        <br />
                        <code>
                            $WAS_HOME/AppServer/hosts/default_host/struts-example/servlets/org/apache/struts/resources/struts-config_1_0.dtd</code>
                        <br />
                        or be connected to the Internet to fetch the dtd from
                        the Jakarta website.
                    </li>

                    
<li>Start your webapp in the Admin Console</li>

                    
<li>Test the example application by loading the following
                        URL in your
                        browser of choice:
                        <a class="externalLink" href="http://localhost/struts-example/">
                            http://localhost/struts-example/&quot;
                            &gt;http://localhost/struts-example/</a>
                    </li>
                </ul>
                <hr />
                
<p>Back to
                    <a href="installation.html#Containers">Installation</a>
                </p>
            </section></section>
        </section>
    

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2000&#x2013;2022<a href="https://github.com/weblegacy">Web-Legacy</a>.
.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>