<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/xdoc/user-guide.xml at 2022-10-11

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Struts Scripting &#x2013; User Guide</title>
    <link rel="stylesheet" href="./css/maven-base.css" />
    <link rel="stylesheet" href="./css/maven-theme.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
  </head>
  <body class="composite">
    <div id="banner">
<a href="https://www.apache.org/" id="bannerLeft"><img src="../images/asf-logo.png"  alt="Apache Software Foundation"/></a><a href="https://struts.apache.org/index.html" id="bannerRight"><img src="../images/struts.png"  alt="Apache Struts"/></a>      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2022-10-11</span>
           | <span id="projectVersion">Version: 1.4.1</span>
      </div>
      <div class="xright"><a href="https://www.apache.org/" class="externalLink" title="Apache">Apache</a> |
<a href="https://struts.apache.org/index.html" class="externalLink" title="Struts">Struts</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Struts Scripting</h5>
    <ul>
     <li class="none"><a href="index.html" title="Welcome">Welcome</a></li>
     <li class="none"><strong>User Guide</strong></li>
     <li class="none"><a href="source-guide.html" title="Source Guide">Source Guide</a></li>
    </ul>
       <h5>Components</h5>
    <ul>
     <li class="none"><a href="../struts-apps/index.html" title="Struts Apps">Struts Apps</a></li>
     <li class="none"><a href="../struts-core/index.html" title="Struts Core">Struts Core</a></li>
     <li class="none"><a href="../struts-el/index.html" title="Struts EL">Struts EL</a></li>
     <li class="none"><a href="../struts-extras/index.html" title="Struts Extras">Struts Extras</a></li>
     <li class="none"><a href="../struts-faces/index.html" title="Struts Faces">Struts Faces</a></li>
     <li class="none"><a href="../struts-scripting/index.html" title="Struts Scripting">Struts Scripting</a></li>
     <li class="none"><a href="../struts-taglib/index.html" title="Struts Taglib">Struts Taglib</a></li>
     <li class="none"><a href="../struts-tiles/index.html" title="Struts Tiles">Struts Tiles</a></li>
     <li class="none"><a href="../struts-tiles2/index.html" title="Struts Tiles 2">Struts Tiles 2</a></li>
    </ul>
       <h5>Quick Links</h5>
    <ul>
     <li class="none"><a href="apidocs/index.html" title="Javadoc">Javadoc</a></li>
     <li class="none"><a href="../index.html" title="Struts 1">Struts 1</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">

  
    <a name="overview"></a><section id="overview">
<h2><a name="User_Guide"></a>User Guide</h2>
      
<p>The entire Struts Scripting component is only a few classes, since most of
      the heavy lifting is done by the
      <a class="externalLink" href="http://jakarta.apache.org/bsf">Bean Scripting Framework</a>
      and the scripting engines themselves.  Therefore, there are only a few steps
      you'll need to take in order to sucessfully install and use Struts Scripting.
        </p>
      
<ul>
        
<li><a href="#installation">Installation</a></li>
        
<li><a href="#usage">Usage</a></li>
      </ul>
    <a name="installation"></a><section id="installation">
<h3><a name="Installation"></a>Installation</h3>
         
<p>After downloading the Struts Scripting distribution, copy the Struts
         Scripting jar, <code>struts-scripting-1.0.1.jar</code>, to your application's
         libraries directory.  When deployed, this directory will be <code>WEB-INF/lib</code>.
         </p>
         
<p>Next, choose which scripting engine you want to use.  BSF ships with knowledge about
         the following languages and script extensions:</p>
         
<table border="0" class="bodyTable"><caption>
              <b>BSF-supported languages and extentions</b>
            </caption>
            
            <tbody>
            
<tr class="a">
             
<td align="left">javascript (js)</td>
             
<td>jacl (jacl)</td>
             
<td>netrexx (nrx)</td>
            </tr>
            
<tr class="b">
             
<td align="left">java (java)</td>
             
<td>javaclass (class)</td>
             
<td>bml (bml)</td>
            </tr>
            
<tr class="a">
             
<td align="left">vbscript (vbs)</td>
             
<td>jscript (jss)</td>
             
<td>perlscript (pls)</td>
            </tr>
            
<tr class="b">
             
<td align="left">perl (pl)</td>
             
<td>jpython (py)</td>
             
<td>jython (py)</td>
            </tr>
            
<tr class="a">
             
<td align="left">lotusscript (lss)</td>
             
<td>xslt (xslt)</td>
             
<td>pnuts (pnut)</td>
            </tr>
            
<tr class="b">
             
<td align="left">beanbasic (bb)</td>
             
<td>beanshell (bsh)</td>
             
<td>ruby (rb)</td>
            </tr>
            
<tr class="a">
             
<td align="left">judoscript (judo, jud)</td>
            </tr>
            </tbody>
        </table>
        
<p>Once you have picked a language, you need to download its libraries and install it
        into your application, which usually means copying its jar files into the same location
        you copied the Struts Scripting jar.  If you are not sure, we recommend Groovy
        which ships with the Struts Scripting Mailreader example, as it features a very similar Java-like syntax.
        </p>
        
<p><i>Optional</i>: If you don't see your desired language that claims to support BSF,
        or their BSF engine has changed from what BSF expects, you can manually define BSF
        engines and have them loaded by Struts Scripting.
          Create a file called
          <code>struts-scripting.properties</code> and add two properties for each engine:
          </p>
          
<ul>
           
<li><code>struts-scripting.engine.ENGINE_NAME.class</code> - The class of the BSF
               engine where ENGINE_NAME is the name you are calling the engine.</li>
           
<li><code>struts-scripting.engine.ENGINE_NAME.extensions</code> - A comma-delimited
               list of file extensions that will be used to identify the engine to use
               to execute the script.</li>
          </ul>
        
<p>The <code>struts-scripting.properties</code> should then stored in a directory
        accessible to the classloader, usually <code>WEB-INF/classes</code>.
        </p>
    </section>
    <a name="usage"></a><section id="usage">
<h3><a name="Usage"></a>Usage</h3>
         
<p>To determine what script will be executed, the &quot;parameter&quot; attribute of
           the action mapping should contain the name of the script relative to
           the web application root directory (i.e. http://server/app). In the place of
         the traditional Action implementation, use the value <code>org.apache.struts.scripting.ScriptAction</code>.
         For example:
         </p>

<div>
<pre>
    &lt;action    path=&quot;/logoff&quot;
               type=&quot;org.apache.struts.scripting.ScriptAction&quot;
               parameter=&quot;/WEB-INF/scripts/Logoff.bsh&quot;&gt;
      &lt;forward name=&quot;success&quot;              path=&quot;/index.jsp&quot;/&gt;
    &lt;/action&gt;
</pre></div>
        
<p>In addition to specifying the script file, the &quot;parameter&quot; attribute can
        also contain parameters that will be passed to the script in the form of
        pre-defined variables.  The format follows the URL format:</p>

<div>
<pre>
    parameter=&quot;/path/file.bsh?PARAMETER_NAME=PARAMETER_VALUE[&amp;amp;PARAMETER_NAME=PARAMETER_VALUE..]&quot;
</pre></div>
        
<p>This ability to pass parameters can enable DispatchAction-type behavior where one script file
            can handle multiple action paths.  If you are using Struts Action 1.3 or later, this feature
            isn't as useful since you can pass multiple values through ActionMapping using the
            <code>&lt;set-property key=&quot;foo&quot; value=&quot;bar&quot;&gt;</code> syntax.
        </p>
        
<p>
        Before the script completes, the next ActionForward needs to be
        specified.  This can be done one of two ways:
        </p>
          
<ol style="list-style-type: decimal">
           
<li>Set <code>struts.forwardName</code> to the name of the forward</li>
           
<li>Set <code>struts.forward</code> to the actual ActionForward object
              </li>
          </ol>
          
<p>A number of pre-defined variables are available to the script:</p>
          
<ul>
           
<li><code>request</code> - The HTTP request</li>
           
<li><code>response</code> - The HTTP response</li>
           
<li><code>session</code> - The session</li>
           
<li><code>application</code> - The servlet context</li>
           
<li><code><a href="apidocs/org/apache/struts/scripting/StrutsInfo.html">struts</a></code>
                - A grouping of all Struts-related objects</li>
           
<li><code>log</code> - A logging instance</li>
          </ul>
          
<p>
          You can add your own variables by creating a BSFManagerFilter and
          configuring it in struts-scripting.properties:
          </p>
          
<ul>
           
<li><code>struts-scripting.filters.FILTER_NAME.class=FILTER_CLASS</code> - The
               class implementing BSFManagerFilter where FILTER_NAME is the name you
               are calling the filter.</li>
           
<li><code>struts-scripting.filters.FILTER_NAME.PROPERTY_NAME=PROPERTY_VALUE</code>
                - A property to be used by the filter.</li>
          </ul>
      </section>
   </section>

          


      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2000&#x2013;2022<a href="https://github.com/weblegacy">Web-Legacy</a>.
.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>